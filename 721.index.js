"use strict";(self.webpackChunkself_create=self.webpackChunkself_create||[]).push([[721],{3063:(e,t,n)=>{n.d(t,{P7:()=>b,U_:()=>w});var i=n(3205),r=n(7294),a=n(758),s=n(2367),o=n(9755),c=n(9532),l=n(8008),u=n(5007),d=n(3171),h=n(9464),f=n(4218);function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var m=function(e){function t(e){var n,r,a,o;(0,s.A)(this,t),r=this,a=t,a=(0,l.A)(a),n=(0,c.A)(r,v()?Reflect.construct(a,[],(0,l.A)(r).constructor):a.apply(r,o)),(0,i.A)(n,"animationId",-1),(0,i.A)(n,"destroyed",!1),(0,i.A)(n,"handleWindowResize",(function(){n.renderer.setSize(n.domElement.clientWidth,n.domElement.clientHeight);var e=n.domElement.clientWidth/n.domElement.clientHeight;n.updateFrustum(e)})),n.domElement=e;var u=e.clientWidth,f=e.clientHeight;return n.renderer=new d.JeP,n.scene=new h.Z58,n.scene.background=new h.Q1f(657930),n.renderer.setSize(u,f),n.initCamera("orthographic"),n.domElement.append(n.renderer.domElement),n.initCameraControls(),n.addLight(),n.resize(),n}return(0,u.A)(t,e),(0,o.A)(t,[{key:"dispose",value:function(){this.renderer.dispose(),window.removeEventListener("resize",this.handleWindowResize)}},{key:"initCameraControls",value:function(){var e=this,t=new f.N(this.camera,this.renderer.domElement);this.controls=t,t.addEventListener("change",(function(){e.render()}))}},{key:"initCamera",value:function(e){var t="perspective"===e,n=this.domElement.clientWidth/this.domElement.clientHeight;if(t)this.camera=new h.ubm(50,n,.1,2e3),this.camera.position.set(0,0,50);else{this.camera=new h.qUd(-500,500,500/n,-500/n,.1,2e3),this.camera.position.set(0,0,60)}}},{key:"addLight",value:function(){var e=new h.ZyN(16777215,1.5),t=new h.$p8(16777215,Math.PI);e.position.set(5,20,-5),t.position.set(0,20,0),this.add(t,e)}},{key:"setControlEnabled",value:function(e){this.controls.enabled=e}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"add",value:function(){var e;(e=this.scene).add.apply(e,arguments)}},{key:"cleanup",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.filter(Boolean);i.forEach((function(e){e.removeFromParent(),requestIdleCallback((function(){e.traverse((function(e){return function(e){null==e||e.dispatchEvent({type:"removed"}),e.geometry&&(e.geometry.dispose(),delete e.geometry)}(e)}))}))})),i.length&&this.render()}},{key:"resize",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"updateFrustum",value:function(e){if(this.camera instanceof h.qUd){var t=this.camera.right;this.camera.left=-t,this.camera.right=t,this.camera.top=t/e,this.camera.bottom=-t/e,this.camera.updateProjectionMatrix()}else this.camera instanceof h.ubm&&(this.camera.aspect=e,this.camera.updateProjectionMatrix())}},{key:"renderSync",value:function(){this.destroyed||(this.render(),this.dispatchEvent({type:"afterRender"}))}},{key:"animate",value:function(e){this.renderSync(),this.animationId=requestAnimationFrame(this.animate.bind(this,e)),e&&!this.destroyed&&e()}},{key:"cancelAnimate",value:function(){-1!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=-1),this.renderSync()}}])}(function(){return(0,o.A)((function e(){(0,s.A)(this,e),this.listeners=new Map,this.tracedTypeSet=new Set}),[{key:"addEventListener",value:function(e,t){var n=this.listeners.get(e);n||(n=[],this.listeners.set(e,n)),n.includes(t)||n.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this.listeners.get(e);if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},{key:"hasEventListener",value:function(e,t){var n=this.listeners.get(e);return!!n&&n.includes(t)}},{key:"getEventListeners",value:function(e){return this.listeners.get(e)}},{key:"dispatchEvent",value:function(e){var t=this.listeners.get(e.type);if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i+=1)n[i].call(this,e);e.target=null}this.log(e)}},{key:"trace",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){return e.tracedTypeSet.add(t)}))}},{key:"log",value:function(e){if(this.tracedTypeSet.has(e.type)){var t=this.getEventListeners(e.type)||[];console.log("".concat(e.type," event executed ").concat(t.length," listeners")),console.log(t)}}}])}()),p=n(6070);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=(0,a.createContext)(null);function k(e){var t=(0,a.useState)(null),n=(0,r.A)(t,2),i=n[0],s=n[1],o=(0,a.useCallback)((function(e){s((function(){return e?new m(e):(null==i||i.dispose(),null)}))}),[]);(0,a.useEffect)((function(){return function(){i&&i.dispose()}}));var c="inner"===e.mode?e.style||{}:{position:"absolute",top:0,right:0,bottom:0,left:0,userSelect:"none"};return(0,p.jsxs)(b.Provider,{value:i,children:[(0,p.jsx)("div",{ref:o,style:c}),i&&e.children]})}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return(0,p.jsx)(k,g(g({},t),{},{children:(0,p.jsx)(e,g({},n))}))}}},4721:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(758),r=n(7968),a=n(4367),s=n(9464),o=n(3063),c=n(5086),l=n(6070);const u=(0,o.U_)((function(){var e=(0,i.useContext)(o.P7);return(0,l.jsx)("div",{children:(0,l.jsx)(r.A,{action:"/",name:"file",onChange:function(t){var n=t.file;if("uploading"!==n.status&&n.originFileObj){var i=URL.createObjectURL(n.originFileObj);(new c.A).load(i).then((function(t){console.log(t),t.traverse((function(e){e.name.includes("skin")&&e instanceof s.eaF&&(e.material=new s.tXL({color:"#151f37"}))})),e.add(t),e.render()})).catch((function(){}))}},children:(0,l.jsx)(a.Ay,{children:"上传"})})})}))}}]);