"use strict";(self.webpackChunkself_create=self.webpackChunkself_create||[]).push([[663],{3063:(e,t,n)=>{n.d(t,{P7:()=>w,U_:()=>k});var r=n(3205),a=n(7294),i=n(758),s=n(2367),o=n(9755),c=n(9532),l=n(8008),h=n(5007),d=n(3171),u=n(9464),p=n(4218);function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var y=function(e){function t(e){var n,a,i,o;(0,s.A)(this,t),a=this,i=t,i=(0,l.A)(i),n=(0,c.A)(a,f()?Reflect.construct(i,[],(0,l.A)(a).constructor):i.apply(a,o)),(0,r.A)(n,"animationId",-1),(0,r.A)(n,"destroyed",!1),(0,r.A)(n,"handleWindowResize",(function(){n.renderer.setSize(n.domElement.clientWidth,n.domElement.clientHeight);var e=n.domElement.clientWidth/n.domElement.clientHeight;n.updateFrustum(e)})),n.domElement=e;var h=e.clientWidth,p=e.clientHeight;return n.renderer=new d.JeP,n.scene=new u.Z58,n.scene.background=new u.Q1f(657930),n.renderer.setSize(h,p),n.initCamera("orthographic"),n.domElement.append(n.renderer.domElement),n.initCameraControls(),n.addLight(),n.resize(),n}return(0,h.A)(t,e),(0,o.A)(t,[{key:"dispose",value:function(){this.renderer.dispose(),window.removeEventListener("resize",this.handleWindowResize)}},{key:"initCameraControls",value:function(){var e=this,t=new p.N(this.camera,this.renderer.domElement);this.controls=t,t.addEventListener("change",(function(){e.render()}))}},{key:"initCamera",value:function(e){var t="perspective"===e,n=this.domElement.clientWidth/this.domElement.clientHeight;if(t)this.camera=new u.ubm(50,n,.1,2e3),this.camera.position.set(0,0,50);else{this.camera=new u.qUd(-500,500,500/n,-500/n,.1,2e3),this.camera.position.set(0,0,60)}}},{key:"addLight",value:function(){var e=new u.ZyN(16777215,1.5),t=new u.$p8(16777215,Math.PI);e.position.set(5,20,-5),t.position.set(0,20,0),this.add(t,e)}},{key:"setControlEnabled",value:function(e){this.controls.enabled=e}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"add",value:function(){var e;(e=this.scene).add.apply(e,arguments)}},{key:"cleanup",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);r.forEach((function(e){e.removeFromParent(),requestIdleCallback((function(){e.traverse((function(e){return function(e){null==e||e.dispatchEvent({type:"removed"}),e.geometry&&(e.geometry.dispose(),delete e.geometry)}(e)}))}))})),r.length&&this.render()}},{key:"resize",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"updateFrustum",value:function(e){if(this.camera instanceof u.qUd){var t=this.camera.right;this.camera.left=-t,this.camera.right=t,this.camera.top=t/e,this.camera.bottom=-t/e,this.camera.updateProjectionMatrix()}else this.camera instanceof u.ubm&&(this.camera.aspect=e,this.camera.updateProjectionMatrix())}},{key:"renderSync",value:function(){this.destroyed||(this.render(),this.dispatchEvent({type:"afterRender"}))}},{key:"animate",value:function(e){this.renderSync(),this.animationId=requestAnimationFrame(this.animate.bind(this,e)),e&&!this.destroyed&&e()}},{key:"cancelAnimate",value:function(){-1!==this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=-1),this.renderSync()}}])}(function(){return(0,o.A)((function e(){(0,s.A)(this,e),this.listeners=new Map,this.tracedTypeSet=new Set}),[{key:"addEventListener",value:function(e,t){var n=this.listeners.get(e);n||(n=[],this.listeners.set(e,n)),n.includes(t)||n.push(t)}},{key:"removeEventListener",value:function(e,t){var n=this.listeners.get(e);if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"hasEventListener",value:function(e,t){var n=this.listeners.get(e);return!!n&&n.includes(t)}},{key:"getEventListeners",value:function(e){return this.listeners.get(e)}},{key:"dispatchEvent",value:function(e){var t=this.listeners.get(e.type);if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,a=n.length;r<a;r+=1)n[r].call(this,e);e.target=null}this.log(e)}},{key:"trace",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){return e.tracedTypeSet.add(t)}))}},{key:"log",value:function(e){if(this.tracedTypeSet.has(e.type)){var t=this.getEventListeners(e.type)||[];console.log("".concat(e.type," event executed ").concat(t.length," listeners")),console.log(t)}}}])}()),v=n(6070);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=(0,i.createContext)(null);function b(e){var t=(0,i.useState)(null),n=(0,a.A)(t,2),r=n[0],s=n[1],o=(0,i.useCallback)((function(e){s((function(){return e?new y(e):(null==r||r.dispose(),null)}))}),[]);(0,i.useEffect)((function(){return function(){r&&r.dispose()}}));var c="inner"===e.mode?e.style||{}:{position:"absolute",top:0,right:0,bottom:0,left:0,userSelect:"none"};return(0,v.jsxs)(w.Provider,{value:r,children:[(0,v.jsx)("div",{ref:o,style:c}),r&&e.children]})}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return(0,v.jsx)(b,g(g({},t),{},{children:(0,v.jsx)(e,g({},n))}))}}},1663:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(7294),a=n(758),i=n(8674),s=n(528),o=n(3063),c=n(8546),l=n(2367),h=n(9755),d=n(3205),u=n(870),p=n(9464),f=function(){return(0,h.A)((function e(t){var n=this;(0,l.A)(this,e),(0,d.A)(this,"wheels3D",[]),(0,d.A)(this,"carMoving",!1),(0,d.A)(this,"lastCallTime",0),(0,d.A)(this,"isObstacleMoving",!1),(0,d.A)(this,"isObstacleMovingTimeout",null),(0,d.A)(this,"handleKeydown",(function(e){if(n.carInfo&&n.raycastVehicle)switch(n.carMoving=!0,n.raycastVehicle.setBrake(10,0),n.raycastVehicle.setBrake(10,1),n.raycastVehicle.setBrake(10,2),n.raycastVehicle.setBrake(10,3),e.key){case"w":n.raycastVehicle.applyEngineForce(-750,0),n.raycastVehicle.applyEngineForce(-750,1),n.raycastVehicle.applyEngineForce(-750,2),n.raycastVehicle.applyEngineForce(-750,3);break;case"s":n.raycastVehicle.applyEngineForce(750,0),n.raycastVehicle.applyEngineForce(750,1),n.raycastVehicle.applyEngineForce(750,2),n.raycastVehicle.applyEngineForce(750,3);break;case"a":n.raycastVehicle.setSteeringValue(.5,2),n.raycastVehicle.setSteeringValue(.5,3);break;case"d":n.raycastVehicle.setSteeringValue(-.5,2),n.raycastVehicle.setSteeringValue(-.5,3);break;case"r":n.resetCar();break;case"q":var t=19.6;n.raycastVehicle.setBrake(t,0),n.raycastVehicle.setBrake(t,1),n.raycastVehicle.setBrake(t,2),n.raycastVehicle.setBrake(t,3),n.raycastVehicle.setSteeringValue(0,2),n.raycastVehicle.setSteeringValue(0,3);break;default:n.brakeVehicle()}})),(0,d.A)(this,"handleKeyup",(function(){n.brakeVehicle(),setTimeout((function(){n.carMoving=!1}),2e3)})),(0,d.A)(this,"handleUpdateWheel",(function(){if(n.raycastVehicle&&n.carInfo&&n.carInfo.wheelBodies.length&&n.car3D){var e=n.raycastVehicle.chassisBody.position;n.car3D.position.set(e.x,e.y-.7,e.z),n.car3D.quaternion.copy(n.raycastVehicle.chassisBody.quaternion);for(var t=0;t<n.raycastVehicle.wheelInfos.length;t+=1){n.raycastVehicle.updateWheelTransform(t);var r=n.raycastVehicle.wheelInfos[t].worldTransform;n.wheels3D[t].position.copy(r.position),n.wheels3D[t].quaternion.copy(r.quaternion)}}})),(0,d.A)(this,"tick",(function(){var e=1/60,t=performance.now()/1e3;if(n.lastCallTime){var r=t-n.lastCallTime;n.physicsWorld.step(e,r)}else n.physicsWorld.step(e);n.lastCallTime=t,n.roundTable3D&&n.roundTableBody&&(n.roundTable3D.rotation.y+=.005,n.roundTableBody.quaternion.setFromAxisAngle(new u.eB(0,1,0),n.roundTable3D.rotation.y),n.raycastVehicle&&n.car3D&&(n.raycastVehicle.chassisBody.quaternion.setFromAxisAngle(new u.eB(0,1,0),n.roundTable3D.rotation.y),n.car3D.quaternion.copy(n.raycastVehicle.chassisBody.quaternion))),n.renderer.render(),n.animationId=window.requestAnimationFrame(n.tick)})),(0,d.A)(this,"handleContact",(function(){n.isObstacleMoving=!0,n.isObstacleMovingTimeout&&clearTimeout(n.isObstacleMovingTimeout),setTimeout((function(){n.isObstacleMoving=!1}),2e3)})),this.renderer=t,this.renderer.camera.position.set(0,5,25),this.physicsWorld=new u.HK({gravity:new u.eB(0,-9.8,0)}),this.physicsWorld.broadphase=new u.EX(this.physicsWorld),this.renderer.add(new p.IzY(20)),this.createRoundTable();var r=new u.im("groundMaterial"),a=new u.im("wheelMaterial"),i=new u.QE(a,r,{friction:.5,restitution:0});this.physicsWorld.addContactMaterial(i),this.addListenerEvents()}),[{key:"dispose",value:function(){var e;(e=this.renderer).cleanup.apply(e,[this.car3D,this.floor3D,this.roundTable3D].concat((0,c.A)(this.wheels3D))),this.physicsWorld.clearForces(),this.animationId&&window.cancelAnimationFrame(this.animationId),this.removeListenerEvents()}},{key:"createFloor",value:function(){var e=new u.nB({mass:0,material:new u.im({friction:.5})});e.mass=0,e.addShape(new u.Zc),e.quaternion.setFromAxisAngle(new u.eB(-1,0,0),Math.PI/2),this.physicsWorld.addBody(e);var t=new p.eaF(new p.bdM(100,100),new p._4j({color:4342338}));t.rotation.x=.5*-Math.PI,this.floor3D=t,this.renderer.add(this.floor3D)}},{key:"createRoundTable",value:function(){var e=this,t=new u.nB({mass:0,material:new u.im({friction:10})});t.addShape(new u.T(5,8,.2,20)),t.position.y=.2,this.roundTableBody=t,this.physicsWorld.addBody(t),(new p.Tap).load("/normalImg.jpeg",(function(t){var n=new p.Ho_(5,5.3,.2,20);e.roundTable3D=new p.eaF(n,new p._4j({color:"#1f1f1f",normalMap:t})),e.roundTable3D.position.y=.2,e.renderer.add(e.roundTable3D)}))}},{key:"addCar",value:function(e,t){var n;this.car3D=e;var r=new u.nB({mass:200,shape:new u.az(new u.eB(1,.4,2.5)),material:new u.im({friction:.5})});this.raycastVehicle=new u.a({chassisBody:r,indexRightAxis:0,indexUpAxis:1,indexForwardAxis:2}),this.raycastVehicle.addToWorld(this.physicsWorld);var a={radius:.3,directionLocal:new u.eB(0,-1,0),suspensionStiffness:55,suspensionRestLength:.3,frictionSlip:30,dampingRelaxation:2.3,dampingCompression:4.3,maxSuspensionForce:1e3,rollInfluence:.01,axleLocal:new u.eB(-1,0,0),chassisConnectionPointLocal:new u.eB,maxSuspensionTravel:1,customSlidingRotationalSpeed:30},i=.9,s=1.55;a.chassisConnectionPointLocal.set(i,-.1,-s),this.raycastVehicle.addWheel(a),a.chassisConnectionPointLocal.set(-i,-.1,-s),this.raycastVehicle.addWheel(a),a.chassisConnectionPointLocal.set(i,-.1,s),this.raycastVehicle.addWheel(a),a.chassisConnectionPointLocal.set(-i,-.1,s),this.raycastVehicle.addWheel(a);for(var o=[],l=0;l<this.raycastVehicle.wheelInfos.length;l+=1){var h=new u.nB({mass:1,material:new u.im({friction:.5})}),d=this.raycastVehicle.wheelInfos[l].radius,f=new u.T(d,d,d/2,20);h.addShape(f,new u.eB),o.push(h);var y=t.clone();1!==l&&3!==l||y.children.forEach((function(e){e instanceof p.eaF&&e.rotateY(Math.PI)})),this.wheels3D.push(y)}this.carInfo={body:r,wheelBodies:o},(n=this.renderer).add.apply(n,[this.car3D].concat((0,c.A)(this.wheels3D))),this.renderer.render(),this.resetCar(),this.tick()}},{key:"updateColor",value:function(e){if(this.car3D){var t=new p.tXL({color:e});this.car3D.traverse((function(e){e.name.includes("skin")&&e instanceof p.eaF&&(e.material=t)}))}}},{key:"brakeVehicle",value:function(){this.raycastVehicle&&(this.raycastVehicle.setBrake(50,0),this.raycastVehicle.setBrake(50,1),this.raycastVehicle.setBrake(50,2),this.raycastVehicle.setBrake(50,3))}},{key:"resetCar",value:function(){if(this.raycastVehicle){var e=this.raycastVehicle.chassisBody;e.position.set(0,2,0),e.quaternion.set(0,0,0,1),e.angularVelocity.set(0,0,0),e.velocity.set(0,0,0)}}},{key:"addListenerEvents",value:function(){document.addEventListener("keydown",this.handleKeydown),document.addEventListener("keyup",this.handleKeyup),this.physicsWorld.addEventListener("postStep",this.handleUpdateWheel),this.physicsWorld.addEventListener("beginContact",this.handleContact)}},{key:"removeListenerEvents",value:function(){document.removeEventListener("keydown",this.handleKeydown),document.removeEventListener("keyup",this.handleKeyup),this.physicsWorld.removeEventListener("postStep",this.handleUpdateWheel),this.physicsWorld.removeEventListener("beginContact",this.handleContact)}},{key:"createSkybox",value:function(){var e=(new p.ScU).setPath("/cubeMap/").load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);this.renderer.scene.background=e}}])}(),y=n(6302),v=n.n(y),m=n(4615),g=n.n(m),w=n(1117),b=n.n(w),k=n(174),V=n.n(k),E=n(5258),A=n.n(E),x=n(4671),C=n.n(x),B=n(553),S={};S.styleTagTransform=C(),S.setAttributes=V(),S.insert=b().bind(null,"head"),S.domAPI=g(),S.insertStyleElement=A(),v()(B.A,S);const T=B.A&&B.A.locals?B.A.locals:void 0;var L=n(6070);const M=function(e){e.selected;var t=e.colors,n=e.onColorChange;return(0,L.jsx)("div",{className:T["color-picker"],children:t.map((function(e){return(0,L.jsx)("div",{className:T["color-swatch"],style:{backgroundColor:e},onClick:function(){return n(e)}},e)}))})};var F=["#001529","#52434e","#e77735","#b7bdc2"];const D=(0,o.U_)((function(){var e=(0,a.useContext)(o.P7),t=(0,i.A)((function(){return new f(e)}),[e]),n=(0,s.LG)(),c=(0,a.useState)(F[0]),l=(0,r.A)(c,2),h=l[0],d=l[1];return(0,a.useEffect)((function(){var e=n["model-car"],r=n["model-wheel"];return t.addCar(e,r),function(){t.dispose()}}),[t]),(0,L.jsx)("div",{className:T.colorBorder,children:(0,L.jsx)(M,{selected:h,colors:F,onColorChange:function(e){d(e),t.updateColor(e)}})})}))},553:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(9013),a=n.n(r),i=n(8454),s=n.n(i)()(a());s.push([e.id,".FFvQGQ9gVnzWgc1VyS2_ {\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n}\n.L76D7N1BkOzKhVMJ8NJO {\n  display: flex;\n  justify-content: center;\n  padding: 10px;\n}\n.MSotyUFMqavqc9aees8V {\n  width: 40px;\n  height: 40px;\n  margin: 0 5px;\n  cursor: pointer;\n  border: 2px solid transparent;\n  transition: border 0.3s;\n}\n.MSotyUFMqavqc9aees8V:hover {\n  border: 2px solid #fff;\n  /* Hover effect */\n}\n",""]),s.locals={colorBorder:"FFvQGQ9gVnzWgc1VyS2_","color-picker":"L76D7N1BkOzKhVMJ8NJO","color-swatch":"MSotyUFMqavqc9aees8V"};const o=s},8454:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);r&&s[h[0]]||(void 0!==i&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=i),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),t.push(h))}},t}},9013:e=>{e.exports=function(e){return e[1]}},6302:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},s=[],o=0;o<e.length;o++){var c=e[o],l=r.base?c[0]+r.base:c[0],h=i[l]||0,d="".concat(l," ").concat(h);i[l]=h+1;var u=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(p);else{var f=a(p,r);r.byIndex=o,t.splice(o,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var o=n(i[s]);t[o].references--}for(var c=r(e,a),l=0;l<i.length;l++){var h=n(i[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}i=c}}},1117:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},5258:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},174:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},4615:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4671:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}}]);